
记录点15追加方案：赋予学生上下文感知能力

一、发现的新问题
-   虽然 S2 获得了作弊能力（直接看 Teacher），但 S1（Master）依然无法通过 Pull Loss 提升。
-   **根本原因**：S1 是 Pointwise 的（`forward(z_I, z_F)` 对每个样本独立计算）。
-   在 `CellBatchSampler` 下，同一 Batch 的样本来自同一细胞系。S1 本应利用这一信息（Context）来推断环境阻抗 $R_E$。
-   但当前的 `DistillStudent` 实现仅使用了样本自身的 $z_F$，没有聚合 Batch 信息。因此 S1 无法区分“不同细胞系中的相同序列”。
-   这导致 S1 在物理上无法逼近 S2（S2 知道 Cell ID）。

二、追加修改
1.  **修改 `DistillStudent`**：
    -   在计算 `film_params` 之前，对 `z_F` 进行 Batch 级聚合（如 Mean Pooling）。
    -   `z_F_ctx = z_F.mean(dim=0, keepdim=True)`
    -   使用 `z_F_ctx`（或其与 `z_F` 的融合）作为 FiLM 的条件输入。
    -   这样 S1 就能通过观察“当前 Batch 的平均特征”来推断“当前是什么细胞系”，从而生成正确的 $R_E$。

三、预期效果
-   S2 利用 Shortcut 设定低 Loss 下界。
-   S1 利用 Batch Context 设定逼近 S2 的机制。
-   Pull Loss 激活并有效驱动 S1 学习如何从 Batch 中提取细胞系特征。
