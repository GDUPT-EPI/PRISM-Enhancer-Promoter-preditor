# 编程思考模型规则集

## 🔥 核心原则 (首要执行)

### 函数依赖管理
- **严格处理函数间依赖关系**：确保函数参数传递、返回值和数据流的正确性
- **逻辑完整性原则**：每一行代码都必须经过逻辑验证，避免引入任何潜在错误，而不应当过度工程化来规避问题
- **数据一致性检查**：所有输入输出必须验证数据类型、形状和值域范围

### 代码质量标准
- **功能注释强制要求**：每个函数必须包含输入、输出、功能说明的完整注释
- **复杂逻辑详细解释**：对于算法核心部分，逐步解释计算逻辑和数学原理
- **模块级文档**：类和模块需要包含设计思路和使用场景说明

## ⚡ 简洁性与直接性原则 (技术债务控制)

### 代码简洁性要求
- **直接、简单、非冗长**：优先选择最直接的解决方案，避免过度复杂的实现
- **拒绝过度工程化**：不要为了"鲁棒性"而添加不必要的复杂度
- **禁止防御性编程过度**：
  ```python
  # ❌ 避免这样做
  try:
      import pandas as pd
  except ImportError:
      print("请安装pandas")
      
  # ✅ 直接导入
  import pandas as pd
  ```

### 技术债务控制
- **避免回避式解决方案**：禁止创建"备用"、"替代"或"fallback"函数来绕过问题
- **直接修复优先**：在当前函数内直接解决问题，不要创建绕过性的替代函数
- **拒绝过度调试架构**：
  - 不引入复杂的调试框架
  - 不添加大量的样板错误处理代码
  - 不使用第三方调试库（除非绝对必要）

### 清晰度优于鲁棒性
- **代码清晰度是第一优先级**：宁可简单清晰，也不要为了"万无一失"而复杂化
- **必要时才添加注释**：只对复杂逻辑添加注释，不要注释显而易见的代码
- **避免过度类型检查**：不要为每个变量都添加类型验证

## 📁 项目结构规则
1. 使用相对目录而非绝对目录
2. 起名原则简洁、规范、统一的驼峰原则

## 🧠 编程思考模型优化

### 问题分析思维
1. **需求拆解**：将复杂任务分解为可验证的小步骤
2. **数据流追踪**：明确每个变量的来源、变换过程和去向
3. **边界条件考虑**：提前处理空值、异常值和极端情况
4. **性能影响评估**：考虑内存使用、计算复杂度和IO效率

### 代码设计策略
- **单一职责原则**：每个函数只做一件事情，且做到极致
- **可测试性设计**：函数接口清晰，便于单元测试和调试
- **配置集中管理**：超参数、路径等配置统一在文件头部定义
- **路径相对化**：使用基于项目的集中式路径配置模式 (Centralized Path Configuration Pattern)，而不要在代码中直接写入绝对路径
- **错误处理机制**：预见性地处理可能的异常情况（但不过度）

## ⚙️ 技术实现规范

### Python代码标准
- **版本要求**：Python 3.10+ 强制要求
- **PEP 8严格遵守**：代码风格、导入顺序、行长度等完全符合标准
- **类型提示**：所有函数参数和返回值必须包含类型注解
- **文档字符串**：使用Google风格的docstring格式

### 命令行调用原则
- **禁止命令行参数**：所有配置通过代码内部常量定义，不依赖外部参数
- **环境激活提醒**：代码注释中明确conda环境要求 (`conda activate abc-env`)


## 🐛 调试与问题解决

### 简单调试优先
- **print()语句调试**：首选最简单的print()输出进行调试
- **基础logging**：仅在必要时使用Python标准库的logging
- **逐步验证**：通过中间结果输出，验证每个计算步骤的正确性
- **避免复杂调试工具**：不使用第三方调试框架、profiler等复杂工具

### 根因分析方法
- **直接修复原则**：在当前函数内部直接解决问题
- **不创建绕过函数**：绝对禁止为了规避错误而创建"备用"函数
- **设计问题识别**：如果无法直接修复，明确说明设计层面的根本问题
- **拒绝复杂错误处理**：不添加大量的try-except嵌套和样板错误处理

## 📊 数据科学特定规则

### 数据处理标准
- **数据验证**：每次数据加载后立即验证完整性和格式正确性
- **内存效率**：优先使用numpy和pandas的向量化操作
- **科学原则**：禁止数据造假，包括但不限于生成随机拟合数据

### 生物信息学规范
- **DNA序列处理**：严格验证ATCGN字符，处理N(未知碱基)情况
- **基因表达数据**：注意log变换、标准化和批次效应的精度问题
- **组织样本对应**：确保序列数据