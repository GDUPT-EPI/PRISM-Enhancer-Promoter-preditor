# PRISM三角色协作工作流

## 系统概述
本工作流实现算法分析师、方案执行者、质检者三角色协作，确保PRISM项目高效推进至AUPR≥0.75目标。

## 角色职责分工
- **算法分析师**：深度问题诊断 + 创新方案设计
- **方案执行者**：代码实现 + 实验执行
- **质检者**：方案评估 + 训练监控 + 流程决策

## 工作流状态机

```
[项目启动] 
    ↓
[算法分析师：问题诊断 + 方案设计]
    ↓
[质检者：方案评估]
    ↓
[通过] → [方案执行者：代码实现 + 训练]
    ↓
[质检者：训练结果评估]
    ↓
[正常] → [方案执行者：预测评估] → [达标检查]
    ↓
[达标] → [项目完成]
[不达标] → [算法分析师：问题诊断]

[不通过] → [算法分析师：重新设计]
[异常/过拟合] → [算法分析师：重新设计]
```

## 决策节点详解

### 节点1：方案质量评估
**触发条件**：算法分析师提交方案
**质检者判断**：
- 通过 → 激活方案执行者
- 不通过 → 要求算法分析师重新设计

**评估标准**：
- 创新性≥6分 且 可行性≥7分
- 与历史方案有本质差异
- 有明确的理论支撑和实现路径

### 节点2：训练结果评估
**触发条件**：训练完成
**质检者判断**：
- 正常 → 继续预测流程
- 过拟合 → 要求算法分析师重新设计
- 异常 → 要求方案执行者修复重训

**评估标准**：
- 收敛正常，无数值异常
- 学习效率≥0.001 AUPR/epoch
- 无明显过拟合迹象

### 节点3：最终验收
**触发条件**：预测完成
**验收标准**：
- domain-kl/test AUPR ≥ 0.75
- 各细胞系AUPR ≥ 0.75
- 泛化性能稳定

## 角色激活机制

### 算法分析师激活条件
1. 项目启动时
2. 质检者判断方案不合格时
3. 质检者判断训练过拟合时
4. 最终验收不达标时

### 方案执行者激活条件
1. 质检者通过方案评估时
2. 质检者要求修复重训时
3. 需要进行预测评估时

### 质检者激活条件
1. 算法分析师提交方案时（自动）
2. 方案执行者完成训练时（自动）

## 防止协同造假机制

### 独立评估
- 质检者使用客观标准，不受其他角色主观影响
- 所有评估基于具体数据和日志证据
- 评估标准公开透明，可追溯

### 历史对比
- 强制检查与历史方案的差异性
- 防止重复失败方案的提交
- 维护失败方案数据库

### 严格标准
- 方案通过标准：创新性≥6分 且 可行性≥7分
- 训练正常标准：收敛+效率+稳定性
- 最终验收标准：AUPR≥0.75

## 效率优化机制

### 快速失败
- 方案评估阶段快速识别低质量方案
- 训练异常早期识别和中断
- 避免无意义的长时间实验

### 并行优化
- 代码实现与理论分析可部分并行
- 多实验并行执行（如有资源）
- 结果分析与下一轮方案设计并行

### 知识积累
- 每轮实验的经验教训记录
- 成功/失败模式的系统化总结
- 历史数据的充分利用

## 当前项目状态
- **记录点**：15
- **当前方案**：作弊者 + 上下文感知
- **性能现状**：最佳AUPR约0.72，距离目标0.75还有0.03差距
- **主要挑战**：S1 vs S2竞争失效，细胞系泛化不足

## 下一步行动
根据当前状态，建议：
1. 质检者评估记录点15的训练结果
2. 如存在问题，算法分析师设计记录点16方案
3. 继续迭代直至达标

## 成功标准
- **技术指标**：所有测试集AUPR≥0.75
- **稳定性**：连续3次实验达标
- **泛化性**：未见细胞系性能稳定
- **效率**：总迭代轮数≤20轮